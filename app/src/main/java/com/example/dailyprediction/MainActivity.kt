package com.example.dailyprediction

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.layout.*
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import kotlinx.coroutines.delay
import kotlin.random.Random

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            DailyPredictionTheme {
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = MaterialTheme.colorScheme.background
                ) {
                    PredictionScreen()
                }
            }
        }
    }
}

@Composable
fun PredictionScreen() {
    var prediction by remember { mutableStateOf("") }
    var isLoading by remember { mutableStateOf(false) }
    var clickCount by remember { mutableStateOf(0) }
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(
            text = "Ежедневное предсказание",
            style = MaterialTheme.typography.headlineMedium
        )
        
        Spacer(modifier = Modifier.height(32.dp))
        
        Button(
            onClick = {
                clickCount++
                isLoading = true
                prediction = ""
            },
            enabled = !isLoading
        ) {
            Text("Получить предсказание")
        }
        
        Spacer(modifier = Modifier.height(16.dp))
        
        if (isLoading) {
            CircularProgressIndicator()
            LaunchedEffect(Unit) {
                delay(Random.nextLong(1000, 3000)) // Задержка от 1 до 3 секунд
                prediction = if (clickCount % 5 == 0) {
                    getSarcasticComment()
                } else {
                    generatePrediction()
                }
                isLoading = false
            }
        } else if (prediction.isNotEmpty()) {
            Text(
                text = prediction,
                style = MaterialTheme.typography.bodyLarge
            )
        }
    }
}

fun getSarcasticComment(): String {
    val comments = listOf(
        "Ого, да вы настойчивы! Предсказания теряют силу, если ими злоупотреблять. Может, сделаем перерыв?",
        "Кажется, кто-то слишком увлекся... Помните, чрезмерное использование предсказаний может вызвать зависимость!",
        "Эй, полегче! Вы что, пытаетесь взломать матрицу судьбы? Так не работает!",
        "Вау, вы действительно любите жить по указке случайного генератора, да? Как насчет того, чтобы принять собственное решение?",
        "Знаете, постоянно спрашивать судьбу - это как гуглить свои симптомы. Ничем хорошим не закончится!"
    )
    return comments.random()
}

fun generatePrediction(): String {
    val predictions = listOf(
        // Позитивные предсказания (70%)
        "Сегодня вас ждет удача во всех начинаниях!",
        "Ваши творческие способности достигнут пика - используйте это!",
        "Финансовая удача улыбнется вам, но не забывайте о благоразумии.",
        "Прислушайтесь к своей интуиции, она приведет вас к успеху.",
        "Неожиданное путешествие может изменить вашу жизнь к лучшему.",
        "Сегодня вы откроете в себе новые таланты и способности.",
        "Будьте готовы к приятным переменам в жизни.",
        "День благоприятен для обучения и получения новых знаний.",
        "Ваша доброта вернется к вам сторицей.",
        "Сегодня вы сможете преодолеть любые препятствия на своем пути.",
        "Ваши идеи будут оценены по достоинству.",
        "Удачный день для новых знакомств и укрепления отношений.",
        "Ваше трудолюбие принесет отличные результаты.",
        "Сегодня вас ждет приятный сюрприз от близкого человека.",
        "Ваши лидерские качества помогут вам достичь успеха.",
        "День полон возможностей - не упустите их!",
        "Ваша харизма сегодня на пике - используйте это с умом.",
        "Удача на вашей стороне в финансовых вопросах.",
        "Сегодня идеальный день для начала нового проекта.",
        "Ваша уверенность в себе привлечет новых союзников.",
        "День благоприятен для решения сложных задач.",
        "Ваша креативность поможет найти нестандартные решения.",
        "Сегодня вы сможете укрепить свои позиции на работе.",
        "Ваша энергия заразительна - вдохновляйте окружающих.",
        "Удачный день для важных переговоров и сделок.",
        "Ваша интуиция подскажет верное решение в сложной ситуации.",
        "Сегодня вас ждет признание ваших заслуг.",
        "День благоприятен для саморазвития и медитации.",
        "Ваша целеустремленность приведет вас к успеху.",
        "Сегодня вы сможете разрешить давний конфликт.",
        "Ваше обаяние поможет вам в достижении целей.",
        "День полон позитивной энергии - делитесь ею с другими.",
        "Ваша щедрость будет вознаграждена.",
        "Сегодня вы сможете найти баланс между работой и личной жизнью.",
        "Ваша уникальность будет оценена по достоинству.",
        "День благоприятен для укрепления семейных связей.",
        "Ваша настойчивость принесет долгожданные плоды.",
        "Сегодня вы сможете преодолеть свои страхи.",
        "Ваша доброжелательность откроет новые двери.",
        "День полон приятных неожиданностей.",
        "Ваша мудрость поможет решить сложную проблему.",
        "Сегодня вас ждет успех в творческих начинаниях.",
        "Ваша позитивная энергия привлечет удачу.",
        "День благоприятен для новых знакомств.",
        "Ваша честность будет вознаграждена.",
        "Сегодня вы сможете достичь гармонии с собой и окружающими.",
        "Ваша решительность приведет к успеху в важном деле.",
        "День полон возможностей для личностного роста.",
        "Ваша доброта вдохновит окружающих.",
        "Сегодня вы сможете воплотить в жизнь давнюю мечту.",
        "Ваша уверенность поможет преодолеть все препятствия.",
        "День благоприятен для укрепления дружеских связей.",
        "Ваша находчивость поможет решить сложную задачу.",
        "Сегодня вас ждет приятное известие.",
        "Ваша целеустремленность вдохновит окружающих.",
        "День полон позитивных эмоций и радостных моментов.",
        "Ваша искренность поможет укрепить важные отношения.",
        "Сегодня вы сможете открыть для себя новые горизонты.",
        "Ваша энергия и энтузиазм принесут отличные результаты.",
        "День благоприятен для принятия важных решений.",
        "Ваша интуиция поможет избежать ненужных конфликтов.",
        "Сегодня вас ждет успех в финансовых делах.",
        "Ваша харизма привлечет новых интересных людей.",
        "День полон вдохновения и творческих идей.",
        "Ваша доброжелательность поможет наладить важные связи.",
        "Сегодня вы сможете преодолеть любые трудности.",
        "Ваша мудрость будет высоко оценена окружающими.",
        "День благоприятен для начала нового этапа в жизни.",
        "Ваша уверенность в себе поможет достичь новых высот.",
        "Сегодня вас ждет приятный сюрприз от друзей.",
        "Ваша креативность поможет найти нестандартное решение.",
        "День полон возможностей для самореализации.",
        "Ваша щедрость вернется к вам сторицей.",
        "Сегодня вы сможете укрепить свои позиции в коллективе.",
        "Ваша целеустремленность приведет к долгожданному успеху.",
        "День благоприятен для расширения кругозора.",
        "Ваша доброта вдохновит окружающих на хорошие поступки.",

        // Негативные предсказания (20%)
        "Сегодня лучше быть осторожнее в финансовых вопросах.",
        "День может принести неожиданные трудности - будьте готовы.",
        "Возможны конфликты с окружающими - сохраняйте спокойствие.",
        "Сегодня лучше отложить важные решения на потом.",
        "День может быть напряженным - берегите свои нервы.",
        "Возможны разочарования в личных отношениях.",
        "Сегодня вас могут подвести близкие люди.",
        "День не благоприятен для новых начинаний.",
        "Возможны проблемы со здоровьем - берегите себя.",
        "Сегодня лучше избегать рис��ов и авантюр.",
        "День может принести финансовые потери - будьте бдительны.",
        "Возможны неприятные сюрпризы на работе.",
        "Сегодня вас могут обмануть - будьте внимательны.",
        "День не подходит для важных переговоров и сделок.",
        "Возможны ссоры с близкими - старайтесь быть терпеливее.",
        "Сегодня вас может подвести интуиция - полагайтесь на факты.",
        "День может принести разочарование в текущих проектах.",
        "Возможны проблемы с транспортом - будьте готовы к задержкам.",
        "Сегодня лучше не брать на себя дополнительные обязательства.",
        "День может быть эмоционально тяжелым - берегите свои нервы.",

        // Саркастические предсказания (10%)
        "Сегодня вы побьете свой личный рекорд по количеству выпитого кофе. Поздравляем!",
        "Ваш кот наконец-то признает ваше превосходство. Шутка, коты никогда этого не делают.",
        "Сегодня вы найдете ответ на главный вопрос жизни, вселенной и всего такого. Спойлер: это не 42.",
        "Ваша способность откладывать дела на потом достигнет новых высот. Браво!",
        "Сегодня вы поймете, что носки действительно исчезают в стиральной машине. Это портал в другое измерение.",
        "Ваше умение опаздывать станет легендарным. Возможно, вам стоит задуматься о карьере волшебника.",
        "Сегодня вы установите новый рекорд по количеству просмотренных серий подряд. Netflix гордится вами!",
        "Ваша диета начнется завтра. Как и вчера, и позавчера, и...",
        "Сегодня вы поймете, что разговоры с домашними растениями не помогают им расти. Но продолжайте, им нравится ваш голос.",
        "Ваша способность находить несуществующие проблемы достигнет пика. Поздравляем, вы теперь официально параноик!"
    )
    return predictions.random()
}

@Composable
fun DailyPredictionTheme(content: @Composable () -> Unit) {
    MaterialTheme {
        content()
    }
}